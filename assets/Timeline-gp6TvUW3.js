import{d as S,r as A,e as b,b as h,s as P,p as _,g as I,F as $,x as w,m as k,o as s}from"./vue.esm-bundler-DRZWSEY8.js";import{E as D}from"./EventoTimeline-CfwIQiJE.js";import{S as F}from"./SeparadorPeriodo-C6J9c9ME.js";import{P as z}from"./PerfilTimeline-wc7EAhTz.js";/* empty css                 */import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const C=S({props:{perfilTimeline:{required:!1,type:Object},eventosTimeline:{required:!0,type:Array}},components:{PerfilTimeline:z,SeparadorPeriodo:F,EventoTimeline:D},emits:{eventoClick:(r,d)=>!0},setup(r,{emit:d}){const E=(e,t)=>{e.clicavel!==!1&&d("eventoClick",e,t)},u=A(r.eventosTimeline);let y=A(u);function p(){const e=T(u);u.forEach(t=>{const o=e.length>0&&e[0]===t;t.atual=o,t.scroll=o}),m()}const f=()=>{setInterval(p,6e4)},v=(e,t)=>{const o=e.getDay()===t.getDay(),n=e.getMonth()===t.getMonth(),i=e.getFullYear()===t.getFullYear();return o&&n&&i},T=e=>{if(e){const t=Date.now();let o=null,n=[];for(const i of e){const l=i.data.getTime();if(i.status==="planejado"||i.status==="atrasado"){const c=Math.abs(t-i.data.getTime());if(o===null||c<o&&l<=t)o=c,n.length=0;else if(c>o)continue;n.push(i)}}return n}else return[]},a=b(()=>{f();const e=y.sort((t,o)=>t.data.getTime()-o.data.getTime());if(e){let t=[],o=null,n=0,i;for(const l of e){const c=new Date,g=l.data;i=l.status;const q=l.tolerancia*60*1e3;i==="planejado"&&g.getTime()+q<c.getTime()&&(l.status="atrasado"),(!o||!v(o,g))&&(o=g,t.push({tipo:"dia",valor:l.data,key:++n})),t.push({tipo:"evento",valor:l,key:++n})}return t}else return[]}),m=()=>{const e=document.querySelector(".atual");!e||!e.scrollIntoView||e.scrollIntoView({behavior:"smooth",block:"center"})};return p(),{eventosPorTipo:a,scrollParaItemAtual:m,handleEventoClick:E}},mounted(){this.scrollParaItemAtual()}}),N={class:"areaTimeline"},V={class:"timeline"};function j(r,d,E,u,y,p){const f=k("PerfilTimeline"),v=k("SeparadorPeriodo"),T=k("EventoTimeline");return s(),h("div",N,[r.perfilTimeline?(s(),P(f,{key:0,nomePerfil:r.perfilTimeline.nome,imagemPerfil:r.perfilTimeline.imagem,iconePerfil:r.perfilTimeline.icone,"data-testid":"perfilTimeline"},null,8,["nomePerfil","imagemPerfil","iconePerfil"])):_("",!0),I("section",V,[(s(!0),h($,null,w(r.eventosPorTipo,(a,m)=>(s(),h("div",{key:a.key},[a.tipo==="dia"?(s(),P(v,{key:0,dataSeparador:a.valor,"data-testid":`evento-timeline-${m}`},null,8,["dataSeparador","data-testid"])):_("",!0),a.tipo==="evento"?(s(),P(T,{key:1,status:a.valor.status,criticidade:a.valor.criticidade,previstoPara:a.valor.previstoPara,"realizado-em":a.valor.realizado,categoria:a.valor.categoria,titulo:a.valor.titulo,subtitulo:a.valor.subtitulo,"texto-destaque":a.valor.destaque,ehAtual:a.valor.atual,onClick:e=>r.handleEventoClick(a.valor,e),"data-testid":`evento-timeline-${m}`},null,8,["status","criticidade","previstoPara","realizado-em","categoria","titulo","subtitulo","texto-destaque","ehAtual","onClick","data-testid"])):_("",!0)]))),128))])])}const H=B(C,[["render",j]]);C.__docgenInfo={exportName:"default",displayName:"Timeline",description:"",tags:{},props:[{name:"perfilTimeline",type:{name:"Perfil"},required:!1},{name:"eventosTimeline",type:{name:"Evento[]"},required:!0}],events:[{name:"eventoClick"}],sourceFiles:["/home/runner/work/timeline-vue/timeline-vue/src/components/timeline/organismos/Timeline.vue"]};export{H as T};
